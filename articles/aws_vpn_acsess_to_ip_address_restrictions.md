---
title: "IPアドレス制限下のサービスにグローバルIPを通じてAWSVPNで接続する"
emoji: "🐙"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [AWS,AWS Clinet VPN]
published: false
---

# はじめに
IPアドレス制限下にあるサービスに接続するために今まではオフィスのグローバルIPを伝えていたが、リモートワーク化に伴いVPNが必要になるケースが増えてきていると思います。

オフィスルーターを利用したVPN接続は、むしろウィルス感染したエンドポイントからVPNを伝ってオフィス内のネットワークに侵入するリスクもあるし、利用者に比例して負荷が増えてしまいます。

本記事では、AWS Clinet VPNを使ってIPアドレス制限下にあるサービスに接続する方法を記します。

## 環境
構成図を書く

##


# モバイルからの接続
AWS VPN Clinetは本記事の執筆時点でiOS/Androidに対応していません。
そのため、OpenVPNを利用しての接続になります。
ただし、iOS/AndroidのOpenVPNはSAMLに対応していないため、SAMLを設計したEndpointとは別に、モバイル用のEndpointを別途作成する必要があります。



# 余談：スプリットトンネルを使って、通信量を下げる
本構成でVPNを利用すると、すべての通信がAVPC内を経由するため莫大な費用がかかってしまいます。
しかし、スプリットトンネルを使うことで、必要な通信だけがAVPCを経由するようになるためコストを大きく抑えることができます。

## 前提条件
接続先のグローバルIPアドレスがわかること

## ルートテーブルにグローバルIPアドレスを追加
ルートテーブルを使って接続先のグローバルIPアドレスをインターネットゲートウェイに向けます。

## スプリットトンネルを有効にする



## 参考記事
クラメソ
